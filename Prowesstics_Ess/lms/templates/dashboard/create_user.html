{% extends '_layout.html' %}
{% block stylesheet %}
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<!doctype html>
<div lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Fonts -->
        <link rel="dns-prefetch" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,600" rel="stylesheet" type="text/css">


        <link rel="icon" href="Favicon.png">

        <title>Laravel</title>
    </head>

    {% endblock %}


    <!--CONTENTS-->
    {% block content %}
	<script>

	function is_employee(){
	
		if(document.getElementById('role').value == 'EMPLOYEE'){
			document.getElementById('report_to_1-div').style.display = 'None';
			document.getElementById('report_to-div').style.display = 'flex';
		}
		else if(document.getElementById('role').value == 'INTERN'){
			document.getElementById('report_to_1-div').style.display = 'flex';
			document.getElementById('report_to-div').style.display = 'None';
		}
		else{
			document.getElementById('report_to_1-div').style.display = 'None';
			document.getElementById('report_to-div').style.display = 'None';
		}
	
	}
	</script>
    <style>
  .card-title{
  font-weight: 800;
  color: white;
  }
  h5{
  font-weight: 800;
  }
    .card-header {
  background: #15192B !important;
  padding: 15px !important;
  }
  .btn-style{
  background: #15192B !important;
  color: white !important;
  }

  </style>

    <div class="card">
        <div class="card-header">
            <h4 class="text-center card-title">
                Create User
            </h4>
        </div>
        <div class="card-body">
             <main class="my-form">
                 <form name="my-form"  action="{% url 'create_user' %}" method="POST" enctype="multipart/form-data" >
                     {% csrf_token %}
                     <div class="container">
                         <div class="col-lg-12">
                             <div class="row">
                             <div class="col-lg-6 text-center p-2">

                                         <label class="text-center">
                                             <h5 class="text-center">Profile Image</h5>
                                            <input type="file" id="file" name="profile_pic"  accept="image/*" style="display:none" onchange="document.getElementById('pro_img').src = window.URL.createObjectURL(this.files[0])">
                                            {% if profile_pic %}
                                             <img id='pro_img' style="max-width: 210px;" class="img-responsive" src="{{ profile_pic.url }}">
                                             {% else %}
                                            <img id='pro_img' style="max-width: 210px;" class="img-responsive" src="https://miro.medium.com/max/250/1*DSNfSDcOe33E2Aup1Sww2w.jpeg">
                                            {% endif %}
                                        <label/>
                             </div>
                             <div class="col-lg-6 col-12 col-sm-12 p-2">
                                 <div class="form-group row">
                                     <label for="employee_name" class="col-md-4 col-form-label text-md-left">Employee Name</label>
                                     <div class="col-md-6">
                                         <input type="text" id="employee_name" class="form-control" name="username" required>
                                     </div>
                                 </div>

                                 <div class="form-group row">
                                     <label for="employee_name" class="col-md-4 col-form-label text-md-left">Employee Id</label>
                                     <div class="col-md-6" >
                                         <input type="text" id="emp_id" class="form-control" name="emp_id" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="email_address" class="col-md-4 col-form-label text-md-left">E-Mail Address</label>
                                     <div class="col-md-6" >
                                         <input type="email" id="email_address" class="form-control" name="email" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Role" class="col-md-4 col-form-label text-md-left">Role</label>
                                     <div class="col-md-6" >
                                         <select name="role" id="role" type="text" class="form-control" onchange="is_employee();" required>
                                             <option value="none" selected>Select</option>
                                             <option value="HR">HR</option>
                                             <option value="MANAGER">MANAGER</option>
                                             <option value="EMPLOYEE">EMPLOYEE</option>
                                             <option value="INTERN">INTERN</option>
                                         </select>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Designation" class="col-md-4 col-form-label text-md-left">Designation</label>
                                     <div class="col-md-6" >
                                         <input type="text" id="Designation" class="form-control" name="designation" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Gender" class="col-md-4 col-form-label text-md-left">Gender</label>
                                     <div class="col-md-6" >
                                         <select name="gender" id="Gender" class="form-control" required>
                                             <option value="none" selected>Select</option>
                                             <option value="male">Male</option>
                                             <option value="female">Female</option>
                                             <option value="other">other</option>
                                         </select>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Dob" class="col-md-4 col-form-label text-md-left">Dob</label>
                                     <div class="col-md-6" >
                                         <input type="date" id="Dob" class="form-control" name="dob" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Doj" class="col-md-4 col-form-label text-md-left">Doj</label>
                                     <div class="col-md-6" >
                                         <input type="date" id="Doj" class="form-control" name="doj" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Sick leaves allowed" class="col-md-4 col-form-label text-md-left">Sick leaves allowed</label>
                                     <div class="col-md-6" >
                                         <input type="number" step="0.5" id="sick" class="form-control" name="sick" required>
                                     </div>
                                 </div>
                                 <div class="form-group row">
                                     <label for="Casual leaves allowed" class="col-md-4 col-form-label text-md-left">Casual leaves allowed</label>
                                     <div class="col-md-6" >
                                         <input type="number" step="0.5" id="casual" class="form-control" name="casual" required>
                                     </div>
                                 </div>
                                 <div id="report_to-div" class="form-group row" style="display:none;">
                                     <label for="Reporting Manager" class="col-md-4 col-form-label text-md-left">Reporting Manager</label>
                                     <div class="col-md-6" >
                                         <select type="text" id="Reporting Manager" class="form-control" name="report_to" required>
                                             <option value="none" selected>Select</option>
                                             {% if report_to %}
                                             {% for user in report_to %}
                                             <option value="{{user.id}}">{{user.name}}</option>
                                             {% endfor %}
                                             {% endif %}
                                         </select>
                                     </div>
                                 </div>
                                 <div id="report_to_1-div" class="form-group row" style="display:none;">
                                     <label for="Reporting Manager" class="col-md-4 col-form-label text-md-left">Reporting To</label>
                                     <div class="col-md-6" >
                                         <select type="text" id="Reporting Manager" class="form-control" name="report_to_1" required>
                                             <option value="none" selected>Select</option>
                                             {% if report_to_1 %}
                                             {% for user in report_to_1 %}
                                             <option value="{{user.id}}">{{user.name}}</option>
                                             {% endfor %}
                                             {% endif %}
                                         </select>
                                     </div>
                                 </div>
                             </div>
                             </div>
                         </div>
                     </div>
                     <div class="card-footer col-md-12 text-center">
                         <button type="submit" class="btn btn-style"
                                 style="">
                             Create
                         </button>
                     </div>
                 </form>
             </main>
        </div>
    </div>
</div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    {% endblock %}