{% extends 'help_base.html' %}
 <!--CONTENTS-->
    <!--CONTENTS-->

    {% block content %}

	<script>

	function is_employee(){

		if(document.getElementById('role').value == 'EMPLOYEE'){
			document.getElementById('report_to_1-div').style.display = 'None';
			document.getElementById('report_to-div').style.display = 'block';
		}
		else if(document.getElementById('role').value == 'INTERN'){
			document.getElementById('report_to_1-div').style.display = 'block';
			document.getElementById('report_to-div').style.display = 'None';
		}
		else{
			document.getElementById('report_to_1-div').style.display = 'None';
			document.getElementById('report_to-div').style.display = 'None';
		}

	}
	</script>
<style>
  .card-title, .modal-title, .close{
  font-weight: 800 !important;
  color: white !important;
  }
   h5{
  font-weight: 700;
  }
    .card-header, .modal-header{
  background: #15192B !important;
  padding: 15px !important;
  }
  .btn-style{
  background: #15192B !important;
  color: white !important;
  font-size: 16px;
  padding: 7px 20px !important;
  cursor: pointer;
  }
  .dwnld-btn{
  font-weight: 700;
  font-size: 15px;
  color: #2EBDD6;
  }
  .dwnld-btn:hover{
  font-weight: 700;
  font-size: 15px;
  color: #15192B;
  }
  .form-group{
  display: flex;
  align-items: center;
  }
  .col-md-3{
  margin: 0 auto;
  }
  .btn-danger{
  background: #ff0000 !important;
  color: #fff !important;
  max-width: 100px !important;
  padding: 7px 20px !important;
  border-radius: 3px !important;
  text-align: center !important;
  }
  .btn-primary{
  background: #2EBDD6 !important;
  color: #fff !important;
  max-width: 100px !important;
  padding: 7px 20px !important;
  border-radius: 3px !important;
  text-align: center !important;
  }
  .modal-body{
  font-size: 17px;
  }
  .modal-content {
  border: none !important;
  }
</style>
    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title text-center">
                                Ticket View</h4>
                        </div>
                        <div class="card-body">
                            <main class="my-form">
                                <div class="container">
                                    <div class="row">
                                        <div class="row col-lg-12 text-center justify-content-center">
                                        <div class="col-lg-12">
                                            <div style="//display: grid; row-gap: 10px;" class="justify-content-center">


                                                    <div class="form-group row">
                                                         <div class="col-md-2"></div>
                                                        <label   for="user_name" class="col-md-3 text-center col-form-label text-md-left">Employee Name</label>
                                                        <div class="col-md-5" >
                                                            <input  type="text" id="user_name" class="form-control   text-md-left"  value="{{name}}" readonly>
                                                        </div>
                                                         <div class="col-md-2"></div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <div class="col-md-2"></div>
                                                        <label  for="category" class="col-md-3 col-form-label text-md-left">Category</label>
                                                        <div class="col-md-5" >
                                                            <input type="text" id="category" class="form-control text-md-left" value="{{category}}" readonly>
                                                        </div>
                                                        <div class="col-md-2"></div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <div class="col-md-2"></div>
                                                        <label  for="description" class="col-md-3 col-form-label text-md-left">Description</label>
                                                        <div class="col-md-5" >
                                                            <textarea style="height: 80px" id="description" class="form-control text-md-left"  readonly>{{description}}</textarea>
                                                        </div>
                                                        <div class="col-md-2"></div>
                                                    </div>
                                                 <div class="form-group row">
                                                     <div class="col-md-2"></div>
                                                        <label for="description" class="col-md-3 col-form-label text-md-left">Ticket Solved</label>
                                                        <div class="col-md-5 " >
                                                            {% if  ticket_solved %}
                                                             <button type="button" class="btn btn-primary text-md-left" data-target="#exampleModal">CLOSED</button>
                                                            {% else%}
                                                             <button type="button" class="btn btn-danger text-md-left" data-toggle="modal" data-target="#exampleModal">CLOSE</button>

                                                         {% endif %}

                                                        </div>
                                                     <div class="col-md-2"></div>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row col-lg-12 text-center">
                                        <div class="col-lg-6 col-md-6 text-center" style="margin: 0 auto;">

                                        <h5 style="font-size: 18px;" class="col-lg-12 col-form-label text-center">Attachment</h5>
                                            {% if ty  %}
                                           <a style="max-width: 100px;" id="d-btn" class="dwnld-btn text-md-left" href='{{attachment}}' download="pdf"> Download  <embed src='{{attachment}}' width='100%' height='250px' frameborder='0'> </a>
                                            {% elif ty == None %}
                                            <a id="d-btn" class="text-md-left">  <img id='pro_img' src='{{attachment}}'
                                                 style="height: 180px; width: 180px;"></a>
                                                                          {% else %}
                                            <a id="d-btn" class="text-md-left" href="{{attachment}}" download="img">  <img id='pro_img' src='{{attachment}}'
                                                 style="height: 180px; width: 180px;"></a>


                                            {% endif %}
                                    </div>
                                    </div>


									</form>
                                    </div>
                                </div>


                            </main>

                        </div>
    </div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Ticket Solved</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       Are sure want to close this ticket ?

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
          <form method="POST" action ="{% url 'tickets_view' %}"   >
                       {% csrf_token %}
        <button  type="submit"  name= 'tick' class="btn btn-primary">Yes</button>
              </form>
      </div>
    </div>
  </div>
</div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    {% endblock %}