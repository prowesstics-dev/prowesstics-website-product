{% load static %}

{% load humanize %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
      <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <title>Dashboard - Prowesstics | {% block title %} {{ title }} {% endblock %}</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="viewport" content="width=device-width"/>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="description" content="Sidebar">
      <meta name="keywords" content=" ">
      <meta name="author" content="Prowesstics admin">
      <!-- Favicon icon -->
      <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
      <!-- Google font-->
      <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
      <!-- Required Fremwork -->
      <link rel="stylesheet" type="text/css" href="{% static 'new_dashboard/css/bootstrap/css/bootstrap.min.css' %}">
      <!-- themify-icons line icon -->
      <link rel="stylesheet" type="text/css" href="{% static 'new_dashboard/icon/themify-icons/themify-icons.css' %}">
      <!-- ico font -->
      <link rel="stylesheet" type="text/css" href="{% static 'new_dashboard/icon/icofont/css/icofont.css' %}">
      <!-- Style.css -->
      <link rel="stylesheet" type="text/css" href="{% static 'new_dashboard/css/style.css' %}">
      <link rel="stylesheet" type="text/css" href="{% static 'new_dashboard/css/jquery.mCustomScrollbar.css' %}">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/orgchart/2.1.3/css/jquery.orgchart.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/orgchart/2.1.3/js/jquery.orgchart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>


<style type="text/css">
     @media only screen and (max-width: 990px) {
   #mobile-collapse {
    display: block !important;
  }
}
  @media only screen and (max-width: 990px) {
   .user-profile {
    background: #15192B !important;
  }
}
    #mobile-collapse {
    display: none;
  }
</style>

<!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="ball-scale">
            <div class='contain'>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">

                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->

<div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">

            <nav class="navbar header-navbar pcoded-header">
                <div class="navbar-wrapper">

                    <div class="navbar-logo">
                        <a class="mobile-menu visible-xs" id="mobile-collapse" href="#!">
                            <i class="ti-menu"></i>
                        </a>
<!--                        <a class="mobile-search morphsearch-search" href="#">-->
<!--                            <i class="ti-search"></i>-->
<!--                        </a>-->
                        <a href="/">
                            <img class="img-fluid new-logo" style="max-width: 80% !important;" width="200px" src="{% static 'new_dashboard/images/auth/prowesstics_org.png' %}" alt="Prowesstics-Logo" />
                        </a>
                        <a class="mobile-options">
                            <i class="ti-more"></i>
                        </a>
                    </div>

                    <div class="navbar-container container-fluid">
                        <ul class="nav-left">
                            <li>
                                <div class="sidebar_toggle"><a href="javascript:void(0)"><i class="ti-menu"></i></a></div>
                            </li>
                        </ul>
                        <ul class="nav-right">
                            <li class="user-profile header-notification">
                                <a>
                                     {% if request.user.profile_pic %}
                                      <img style="max-width: 210px;border-radius: 20px !important;" class="rounded img-responsive center-block" src="{{ request.user.profile_pic.url }}">
                                    {% else %}
                                    <img src="https://www.gravatar.com/avatar/e56154546cf4be74e393c62d1ae9f9d4?s=250&amp;d=mm&amp;r=x"class="img-radius" style="border-radius: 20px;" alt="User-Profile-Image">
                                    {% endif %}
                                    <span>{{ request.user}}</span>
                                    <i class="ti-angle-down"></i>
                                </a>
                                <ul class="show-notification profile-notification" style="font-size: 14px;">
                                    {% if request.user.is_authenticated %}
                                <li><a href="{% url 'user_logout' %}"><i class="ti-layout-sidebar-left"></i>Logout</a></li>
                                {% else %}
                                <li><a href=""><i class="ti-arrow-circle-right"></i>Login</a></li>
                                {% endif %}
<!--                                <li><a href="{% url 'change_password' %}"><i class="ti-key"></i>Change Password</a></li>-->


                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <nav class="pcoded-navbar">
                        <div class="sidebar_toggle"><a href="#"><i class="icon-close icons"></i></a></div>
                        <div class="pcoded-inner-navbar main-menu">
                            <div class="">
                                <div class="main-menu-content">
                                    <ul>
                                        <li class="more-details">
                                            <a href="#"><i class="ti-user"></i>View Profile</a>
                                            <a href="#!"><i class="ti-settings"></i>Settings</a>
                                            <a href="auth-normal-sign-in.html"><i class="ti-layout-sidebar-left"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="pcoded-navigatio-lavel" data-i18n="nav.category.navigation"></div>
                            <div id="allLi">
                            <ul id="NavTabs" class="pcoded-item pcoded-left-item">
                                <li>
                                    <a href="{% url 'training' %}">
                                        <span class="pcoded-micon"><i class="ti-files"></i><b>D</b></span>
                                        <span class="pcoded-mtext" data-i18n="nav.dash.main">Training</span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>
                                <li>
                                    <a href="{% url 'user_login' %}">
                                        <span class="pcoded-micon"><i class="ti-bookmark-alt"></i><b>D</b></span>
                                        <span class="pcoded-mtext" data-i18n="nav.dash.main">Employee Self Service</span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>
                            </ul>
                            </div>
                        </div>
                    </nav>
                    <div class="pcoded-content">
                        <div class="pcoded-inner-content">
                            <div class="main-body">
                                <div class="page-wrapper">
                                    <div class="page-body">
                                        {% block content %}
        <section class="content">
            <section class="container-fluid">
                            </section> <!-- /container -->


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.css"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/orgchart/2.1.3/css/jquery.orgchart.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/orgchart/2.1.3/js/jquery.orgchart.min.js"></script>
    <style>
    .card-title{
        color: white !important;
        font-weight: 700 !important;
    }

    .card-header {
        background: #15192B !important;
        padding: 15px !important;
    }

    .card {
        margin-bottom: 25px;
        box-shadow: 0 2px 10px rgb(0 0 0 / 10%);
        border: none;
        {#background-color: rgba(0, 0, 0, .2);#}
    }

    .training-download-btn {
        align-self: center;
        background-color: #fff;
        background-image: none;
        background-position: 0 90%;
        background-repeat: repeat no-repeat;
        background-size: 4px 3px;
        border: 2px solid black;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, .2) 15px 28px 25px -18px;
        box-sizing: border-box;
        color: #41403e;
        cursor: pointer;
        display: inline-block;
        font-size: 0.9rem;
        line-height: 23px;
        outline: none;
        font-weight: 600;
        padding: 0.5rem;
        text-decoration: none;
        transition: all 235ms ease-in-out;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
    }

    .training-download-btn:hover {
        box-shadow: rgba(0, 0, 0, .3) 2px 8px 8px -5px !important;
        transform: translate3d(0, 2px, 0) !important;
    }

    .training-download-btn:focus {
        box-shadow: rgba(0, 0, 0, .3) 2px 8px 4px -6px;
    }

    .training-content-div h6{
        font-size: 14px;
        font-weight: 600;
    }

    .training-content-div h6 span{
        font-size: 13px;
        margin: 0px 7px;
    }

    .training-content-div a:focus, a:hover {
        text-decoration: none;
        color: #000;
    }
    </style>
    <div id="myDIV" class="container-fluid">
        <div class="row ">
            <div class="col-12 col-lg-12">
                <div class="card">
                    <div class="card-header text-center"><h4 class="card-title text-center">Training Materials</h4> </div>
                    <div class="card-body">
                        {% if request.user.role == 'ADMIN' %}
                            <div class="card mb-3">
                                <div class="card-body">
                                    <form method="POST" action="{% url 'upload_training' %}" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <div class="form-group">
                                            <label for="file">Select file(s) to upload:</label>
                                            <input type="file" class="form-control-file" name="file" id="file" multiple>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Upload</button>
                                    </form>
                                    {% if uploaded_files %}
                                        <div class="card mt-3">
                                            <div class="card-header">
                                                <div class="text-center">
                                                    <h4 class="card-title">Uploaded Files</h4>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <ul class="list-group">
                                                    {% for file in uploaded_files %}
                                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                                            {{ file.name }}
                                                            <form method="POST" action="{% url 'delete_file' file.id %}">
                                                                {% csrf_token %}
                                                                <button type="submit" class="btn btn-danger">Delete</button>
                                                            </form>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}

                        
                        {%if request.user.role == 'HR' or request.user.role == 'EMPLOYEE' or request.user.role == 'INTERN' or request.user.role == 'MANAGER' %}

                            <div class="col-12 col-lg-12 col-xl-12">
                                <div class="row d-flex justify-content-center">
                                    {% for file in files %}
                                    <div class="col-8 col-lg-8 col-xl-8 training-content-div d-flex align-items-center justify-content-between mt-3">
                                        <h6 class="d-flex align-items-center justify-content-center"><span >{{forloop.counter}}. </span>{{ file.name }}</h6>
                                        <a href="{% url 'training_download' file_name=file.name %}" class="training-download-btn"><i class="fa fa-download" aria-hidden="true"></i> Download</a>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endif %}
                         
                    </div>
                </div>
            </div>
        </div>
    </div>
    </section>
        {% endblock %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    </div>
                </div>
            </div>
        </div>
<script type="text/javascript" src="{% static 'new_dashboard/js/jquery/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'new_dashboard/js/jquery-ui/jquery-ui.min.js' %}"></script>
<script type="text/javascript" src="{% static 'new_dashboard/js/popper.js/popper.min.js' %}"></script>
<script type="text/javascript" src="{% static 'new_dashboard/js/bootstrap/js/bootstrap.min.js' %}"></script>
<!-- jquery slimscroll js -->
<script type="text/javascript" src="{% static 'new_dashboard/js/jquery-slimscroll/jquery.slimscroll.js' %}"></script>
<!-- modernizr js -->
<script type="text/javascript" src="{% static 'new_dashboard/js/modernizr/modernizr.js' %}"></script>
<!-- am chart -->
<script src="{% static 'new_dashboard/pages/widget/amchart/amcharts.min.js' %}"></script>
<script src="{% static 'new_dashboard/pages/widget/amchart/serial.min.js' %}"></script>
<!-- Todo js -->
<script type="text/javascript " src="{% static 'new_dashboard/pages/todo/todo.js' %}"></script>
<!-- Custom js -->
<script type="text/javascript" src="{% static 'new_dashboard/pages/dashboard/custom-dashboard.js' %}"></script>
<script type="text/javascript" src="{% static 'new_dashboard/js/script.js' %}"></script>
<script type="text/javascript " src="{% static 'new_dashboard/js/SmoothScroll.js' %}"></script>
<script src="{% static 'new_dashboard/js/pcoded.min.js' %}"></script>
<script src="{% static 'new_dashboard/js/demo-12.js' %}"></script>
<script src="{% static 'new_dashboard/js/jquery.mCustomScrollbar.concat.min.js' %}"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script type="text/javascript">
        {% block extrajs%}



        {% endblock %}

</script>

<script>
    $( document ).ready(function() {
         var currentUrl = "{{ request.build_absolute_uri }}"
         //console.log(currentUrl)
         var tab = document.getElementById("NavTabs");
         var allLi =document.getElementById('allLi').querySelectorAll('li')
         //console.log("tab",allLi)
         //tab.children[2].classList.add("dummy");
         allLi.forEach((li) =>{
             //console.log(li.firstElementChild)
             //console.log(li.firstElementChild == currentUrl)
             if (li.firstElementChild == currentUrl) {
                 li.classList.add('active')
             }
             else{
                  li.classList.remove('active')
             }
         })
    });

    
    
</script>
</body>

</html>
